services:
  crop:
    image: highlightprocessing
    build: .
    volumes:
      - ./videos:/videos
    working_dir: /app
    entrypoint: ["python", "src/crop_video_moviepy.py"]

  scrub_voices:
    image: highlightprocessing
    volumes:
      - ./videos:/videos
    working_dir: /app
    entrypoint: ["python", "src/scrub_voices.py"]

  process:
    image: highlightprocessing
    volumes:
      - ./videos:/videos
      - ./.ig_session.json:/app/.ig_session.json
    working_dir: /app
    env_file: .env
    entrypoint: ["python", "src/process_video.py"]

  upload-instagram:
    image: highlightprocessing
    volumes:
      - ./videos:/videos
      - ./.ig_session.json:/app/.ig_session.json
    working_dir: /app
    env_file: .env
    entrypoint: ["python", "src/upload_instagram.py"]
